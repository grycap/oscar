
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../deploy-im-dashboard/">
      
      <link rel="icon" href="../images/logo.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.19">
    
    
      
        <title>Local testing - OSCAR Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#local-testing-with-kind" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OSCAR Documentation" class="md-header__button md-logo" aria-label="OSCAR Documentation" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSCAR Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Local testing
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/grycap/oscar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OSCAR Documentation" class="md-nav__button md-logo" aria-label="OSCAR Documentation" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    OSCAR Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/grycap/oscar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Local testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Local testing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automated-local-testing" class="md-nav__link">
    Automated local testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-for-manual-local-testing" class="md-nav__link">
    Steps for manual local testing
  </a>
  
    <nav class="md-nav" aria-label="Steps for manual local testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-cluster" class="md-nav__link">
    Create the cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-nginx-ingress" class="md-nav__link">
    Deploy NGINX Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-minio" class="md-nav__link">
    Deploy MinIO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-nfs-server-provisioner" class="md-nav__link">
    Deploy NFS server provisioner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-knative-serving-as-serverless-backend-optional" class="md-nav__link">
    Deploy Knative Serving as Serverless Backend (OPTIONAL)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-oscar" class="md-nav__link">
    Deploy OSCAR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-the-cluster" class="md-nav__link">
    Delete the cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-oscar-cli" class="md-nav__link">
    Using OSCAR-CLI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy-im-dashboard/" class="md-nav__link">
        Deployment with IM Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy-ec3/" class="md-nav__link">
        Deployment with EC3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy-helm/" class="md-nav__link">
        Deployment with Helm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deploy-ansible/" class="md-nav__link">
        Deployment on K3s with Ansible
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        Using OSCAR through the web-based UI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../invoking/" class="md-nav__link">
        Invoking services
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../fdl/" class="md-nav__link">
        Functions Definition Language (FDL)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../fdl-composer/" class="md-nav__link">
        FDL Composer
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../oscar-cli/" class="md-nav__link">
        OSCAR-CLI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../egi-integration/" class="md-nav__link">
        Integration with EGI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../oidc-auth/" class="md-nav__link">
        OIDC Authorization
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        OpenAPI Specification
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../minio-bucket-replication/" class="md-nav__link">
        MinIO bucket replication
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        Frequently Asked Questions (FAQ)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automated-local-testing" class="md-nav__link">
    Automated local testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-for-manual-local-testing" class="md-nav__link">
    Steps for manual local testing
  </a>
  
    <nav class="md-nav" aria-label="Steps for manual local testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-cluster" class="md-nav__link">
    Create the cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-nginx-ingress" class="md-nav__link">
    Deploy NGINX Ingress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-minio" class="md-nav__link">
    Deploy MinIO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-nfs-server-provisioner" class="md-nav__link">
    Deploy NFS server provisioner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-knative-serving-as-serverless-backend-optional" class="md-nav__link">
    Deploy Knative Serving as Serverless Backend (OPTIONAL)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-oscar" class="md-nav__link">
    Deploy OSCAR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-the-cluster" class="md-nav__link">
    Delete the cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-oscar-cli" class="md-nav__link">
    Using OSCAR-CLI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="local-testing-with-kind">Local Testing with kind</h1>
<p>The easiest way to test the OSCAR platform locally is using
<a href="https://kind.sigs.k8s.io/">kind</a>. Kind allows the deployment of Kubernetes
clusters inside Docker containers and automatically configures <code>kubectl</code> to
access them.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li><a href="https://docs.docker.com/get-docker/">Docker</a>, required by kind to launch
  the Kubernetes nodes on containers.</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">Kubectl</a> to
  communicate with the Kubernetes cluster.</li>
<li><a href="https://helm.sh/docs/intro/install/">Helm</a> to easily deploy applications on Kubernetes.</li>
<li><a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation">Kind</a> to
  deploy the local Kubernetes cluster.</li>
</ul>
<p><strong>Other prerequisites</strong></p>
<ul>
<li>
<p>Although the use of local Docker images has yet to be implemented as a feature on OSCAR clusters, the local deployment for testing allows you to use a local Docker registry to use this kind of images. 
The registry uses by default the port 5001, so each image you want to use must be tagged as <code>localhost:5001/[image_name]</code> and pushed to the repository through the <code>docker push localhost:5001/[image_name]</code> command.</p>
</li>
<li>
<p>Port 80 must be available to avoid errors during the deployment since OSCAR-UI uses it. Check <a href="../faq/">Frequently Asked Questions (FAQ)</a> for more info.</p>
</li>
</ul>
<h2 id="automated-local-testing">Automated local testing</h2>
<p>To set up the enviroment for the platform testing you can run the following
command. This script automatically executes all the necessary steps to deploy
the local cluster and the OSCAR platform along with all the required tools. </p>
<pre><code class="language-sh">curl -sSL http://go.oscar.grycap.net | bash
</code></pre>
<h2 id="steps-for-manual-local-testing">Steps for manual local testing</h2>
<p>If you want to do it manualy you can follow the listed steps.</p>
<h3 id="create-the-cluster">Create the cluster</h3>
<p>To create a single node cluster with MinIO and Ingress controller ports
locally accessible, run:</p>
<pre><code class="language-sh">cat &lt;&lt;EOF | kind create cluster --config=-
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  kubeadmConfigPatches:
  - |
    kind: InitConfiguration
    nodeRegistration:
      kubeletExtraArgs:
        node-labels: &quot;ingress-ready=true&quot;
  extraPortMappings:
  - containerPort: 80
    hostPort: 80
    protocol: TCP
  - containerPort: 443
    hostPort: 443
    protocol: TCP
  - containerPort: 30300
    hostPort: 30300
    protocol: TCP
  - containerPort: 30301
    hostPort: 30301
    protocol: TCP
EOF
</code></pre>
<h3 id="deploy-nginx-ingress">Deploy NGINX Ingress</h3>
<p>To enable Ingress support for accessing the OSCAR server, we must deploy the
<a href="https://kubernetes.github.io/ingress-nginx/">NGINX Ingress</a>:</p>
<pre><code class="language-sh">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/kind/deploy.yaml
</code></pre>
<h3 id="deploy-minio">Deploy MinIO</h3>
<p>OSCAR depends on <a href="https://min.io/">MinIO</a> as a storage provider and function
trigger. The easy way to run MinIO in a Kubernetes cluster is by installing
its <a href="https://github.com/minio/charts">helm chart</a>. To  install the helm MinIO
repo and install the chart, run the following commands replacing
<code>&lt;MINIO_PASSWORD&gt;</code> with a password. It must have at least 8 characters:</p>
<pre><code class="language-sh">helm repo add minio https://charts.min.io
helm install minio minio/minio --namespace minio --set rootUser=minio,\
rootPassword=&lt;MINIO_PASSWORD&gt;,service.type=NodePort,service.nodePort=30300,\
consoleService.type=NodePort,consoleService.nodePort=30301,mode=standalone,\
resources.requests.memory=512Mi,\
environment.MINIO_BROWSER_REDIRECT_URL=http://localhost:30301 \
 --create-namespace
</code></pre>
<p><em>Note that the deployment has been configured to use the rootUser <code>minio</code> and
the specified password as rootPassword. The NodePort service type has been
used in order to allow access from <code>http://localhost:30300</code> (API) and
<code>http://localhost:30301</code> (Console).</em></p>
<h3 id="deploy-nfs-server-provisioner">Deploy NFS server provisioner</h3>
<p>NFS server provisioner is required for the creation of <code>ReadWriteMany</code>
PersistentVolumes in the kind cluster. This is needed by the OSCAR services
to mount the volume with the
<a href="https://github.com/grycap/faas-supervisor">FaaS Supervisor</a> inside the job
containers.</p>
<p>To deploy it you can use
<a href="https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner/tree/master/deploy/helm">this chart</a>
executing:</p>
<pre><code class="language-sh">helm repo add nfs-ganesha-server-and-external-provisioner https://kubernetes-sigs.github.io/nfs-ganesha-server-and-external-provisioner/
helm install nfs-server-provisioner nfs-ganesha-server-and-external-provisioner/nfs-server-provisioner
</code></pre>
<p><em>Some Linux distributions may have
<a href="https://github.com/kubernetes-sigs/kind/issues/1487#issuecomment-694920754">problems</a>
using the <a href="https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner">NFS server provisioner</a>
with kind due to its default configuration of kernel-limit file descriptors.
To workaround it, please run <code>sudo sysctl -w fs.nr_open=1048576</code>.</em></p>
<h3 id="deploy-knative-serving-as-serverless-backend-optional">Deploy Knative Serving as Serverless Backend (OPTIONAL)</h3>
<p>OSCAR supports <a href="https://knative.dev/docs/serving/">Knative Serving</a> as
Serverless Backend to process
<a href="../invoking/#synchronous-invocations">synchronous invocations</a>. If you want
to deploy it in the kind cluster, first you must deploy the
<a href="https://knative.dev/docs/install/operator/knative-with-operators/">Knative Operator</a></p>
<pre><code>kubectl apply -f https://github.com/knative/operator/releases/download/knative-v1.3.1/operator.yaml
</code></pre>
<p><em>Note that the above command deploys the version <code>v1.3.1</code> of the Operator.
You can check if there are new versions <a href="https://github.com/knative/operator/releases">here</a>.</em></p>
<p>Once the Operator has been successfully deployed, you can install the Knative
Serving stack with the following command:</p>
<pre><code>cat &lt;&lt;EOF | kubectl apply -f -
---
apiVersion: v1
kind: Namespace
metadata:
  name: knative-serving
---
apiVersion: operator.knative.dev/v1beta1
kind: KnativeServing
metadata:
  name: knative-serving
  namespace: knative-serving
spec:
  version: 1.3.0
  ingress:
    kourier:
      enabled: true
      service-type: ClusterIP
  config:
    config-features:
      kubernetes.podspec-persistent-volume-claim: enabled
      kubernetes.podspec-persistent-volume-write: enabled
    network:
      ingress-class: &quot;kourier.ingress.networking.knative.dev&quot;
EOF
</code></pre>
<h3 id="deploy-oscar">Deploy OSCAR</h3>
<p>First, create the <code>oscar</code> and <code>oscar-svc</code> namespaces by executing:</p>
<pre><code class="language-sh">kubectl apply -f https://raw.githubusercontent.com/grycap/oscar/master/deploy/yaml/oscar-namespaces.yaml
</code></pre>
<p>Then, add the <a href="https://github.com/grycap/helm-charts">grycap helm repo</a> and
deploy by running the following commands replacing <code>&lt;OSCAR_PASSWORD&gt;</code> with a
password of your choice and <code>&lt;MINIO_PASSWORD&gt;</code> with the MinIO rootPassword,
and remember to add the flag <code>--set serverlessBackend=knative</code> if you deployed
it in the previous step:</p>
<pre><code class="language-sh">helm repo add grycap https://grycap.github.io/helm-charts/
helm install --namespace=oscar oscar grycap/oscar \
 --set authPass=&lt;OSCAR_PASSWORD&gt; --set service.type=ClusterIP \
 --set ingress.create=true --set volume.storageClassName=nfs \
 --set minIO.endpoint=http://minio.minio:9000 --set minIO.TLSVerify=false \
 --set minIO.accessKey=minio --set minIO.secretKey=&lt;MINIO_PASSWORD&gt;
</code></pre>
<p>Now you can access to the OSCAR web interface through <code>https://localhost</code> with
user <code>oscar</code> and the specified password.</p>
<p><em>Note that the OSCAR server has been configured to use the ClusterIP service
of MinIO for internal communication. This blocks the MinIO section in the
OSCAR web interface, so to download and upload files you must connect directly
to MinIO (<code>http://localhost:30300</code>).</em></p>
<h3 id="delete-the-cluster">Delete the cluster</h3>
<p>Once you have finished testing the platform, you can remove the local kind
cluster by executing:</p>
<pre><code class="language-sh">kind delete cluster
</code></pre>
<p><em>Remember that if you have more than one cluster created, it may be required
to set the <code>--name</code> flag to specify the name of the cluster to be deleted.</em></p>
<h3 id="using-oscar-cli">Using OSCAR-CLI</h3>
<p>To use OSCAR-CLI in a local deployment, you should set the <code>--disable-ssl</code>
flag to disable verification of the self-signed certificates:</p>
<pre><code class="language-sh">oscar-cli cluster add oscar-cluster https://localhost oscar &lt;OSCAR_PASSWORD&gt; --disable-ssl
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2022, GRyCAP - i3M - Universitat Politècnica de València, Spain.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>